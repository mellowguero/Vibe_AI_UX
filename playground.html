<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Module Playground</title>
  <link rel="stylesheet" href="src/styles/tokens.css">
  <link rel="stylesheet" href="playground.css">
  <style>
    /* Quick inline experiments here */
  </style>
</head>
<body>
  <div class="playground-container">
    <header class="playground-header">
      <h1>Module Playground</h1>
      <p>Experiment with module composition, states, and styling</p>
    </header>

    <!-- Chat Module Play Area -->
    <section class="play-area" id="chat-module-area">
      <h2 class="play-area-title">Chat Module</h2>
      <div class="play-area-content">
        <!-- Full Chat Module -->
        <div class="state-group full-width" style="position: relative;">
          <h3>Full Chat Module</h3>
          <div style="display: flex; gap: 20px; align-items: flex-start;">
            <div class="chat-module-example" style="position: relative;">
              <div class="chat-messages">
                <div class="chat-message chat-message-user">
                  <div class="chat-message-bubble tail-bottom">
                    <div class="chat-message-text">Hey, check out this song!</div>
                  </div>
                  <div class="chat-message-time">07:16 PM</div>
                </div>
                <div class="chat-message chat-message-ai">
                  <div class="chat-message-bubble tail-bottom">
                    <div class="chat-message-text">give 'Bob Dylan - Like a Rolling Stone' a spin. It's like a musical time machine back to the 60s.</div>
                    <div class="music-module-placeholder"></div>
                  </div>
                  <div class="chat-message-time">07:17 PM</div>
                </div>
              </div>
              <div class="chat-input-container">
                <input type="text" class="chat-input" placeholder="Type a message...">
                <button class="chat-send-button">Send</button>
              </div>
              <div class="module-resize-handle"></div>
            </div>
          </div>
        </div>

        <!-- Full Modal Chat Container -->
        <div class="state-group full-width chat-container-bg">
          <h3>Full Modal Chat Container</h3>
          <div class="chat-container-wrapper">
            <div class="chat-module-full" id="glass-container" style="height: 600px;">
              <div class="chat-messages-area">
                <div class="chat-message chat-message-ai">
                  <div class="chat-message-bubble tail-bottom">
                    <div class="chat-message-text">AI message here.</div>
                  </div>
                </div>
                <div class="chat-message chat-message-user">
                  <div class="chat-message-bubble tail-bottom">
                    <div class="chat-message-text">Hi there</div>
                  </div>
                </div>
                <div class="chat-message chat-message-ai">
                  <div class="chat-message-bubble tail-bottom">
                    <div class="chat-message-text">AI message here.</div>
                  </div>
                </div>
                <div class="chat-message chat-message-user">
                  <div class="chat-message-bubble tail-bottom">
                    <div class="chat-message-text">Ok here we go</div>
                  </div>
                </div>
                <div class="chat-message chat-message-ai">
                  <div class="chat-message-bubble tail-top">
                    <div class="chat-message-text">This is a longer AI message that demonstrates how the bubble scales with content. The text will wrap naturally and the bubble will grow to accommodate it, but it will never exceed the maximum width of 400px as specified in the design.</div>
                  </div>
                </div>
                <div class="chat-message chat-message-user">
                  <div class="chat-message-bubble tail-top">
                    <div class="chat-message-text">This is a longer user message that demonstrates how the bubble scales with content. The text will wrap naturally and the bubble will grow to accommodate it, but it will never exceed the maximum width of 400px as specified in the design.</div>
                  </div>
                </div>
                <div class="chat-message chat-message-ai">
                  <div class="chat-message-bubble tail-bottom">
                    <div class="chat-message-text">give 'Bob Dylan - Like a Rolling Stone' a spin. It's like a musical time machine back to the 60s.</div>
                    <div class="music-module-placeholder"></div>
                  </div>
                </div>
              </div>
              <div class="chat-input-area">
                <input type="text" class="chat-input" placeholder="Test">
                <button class="chat-send-button">Send</button>
              </div>
            </div>
            
            <!-- Glass Effect Controls -->
            <div class="glass-controls-panel">
              <div class="glass-controls-header">
                <span>Glass</span>
                <span class="beta-tag">Beta</span>
              </div>
              
              <div class="glass-control-section">
                <div class="glass-control-label">
                  <span>Light</span>
                  <div class="light-preview"></div>
                </div>
                <div class="glass-control-item">
                  <label>Intensity</label>
                  <div class="slider-container">
                    <input type="range" id="light-intensity" min="0" max="100" value="80" class="glass-slider">
                    <span class="slider-value" id="light-intensity-value">80%</span>
                  </div>
                </div>
              </div>
              
              <div class="glass-control-section">
                <div class="glass-control-item">
                  <label>Refraction</label>
                  <div class="slider-container">
                    <input type="range" id="refraction" min="0" max="100" value="80" class="glass-slider">
                    <span class="slider-value" id="refraction-value">80</span>
                  </div>
                </div>
                <div class="glass-control-item">
                  <label>Depth</label>
                  <div class="slider-container">
                    <input type="range" id="depth" min="0" max="100" value="63" class="glass-slider">
                    <span class="slider-value" id="depth-value">63</span>
                  </div>
                </div>
                <div class="glass-control-item">
                  <label>Dispersion</label>
                  <div class="slider-container">
                    <input type="range" id="dispersion" min="0" max="100" value="67" class="glass-slider">
                    <span class="slider-value" id="dispersion-value">67</span>
                  </div>
                </div>
                <div class="glass-control-item">
                  <label>Frost</label>
                  <div class="slider-container">
                    <input type="range" id="frost" min="0" max="100" value="19" class="glass-slider">
                    <span class="slider-value" id="frost-value">19</span>
                  </div>
                </div>
              </div>
              
              <div class="glass-control-section">
                <div class="glass-control-item">
                  <label>Background R</label>
                  <div class="slider-container">
                    <input type="range" id="bg-r" min="0" max="255" value="255" class="glass-slider">
                    <span class="slider-value" id="bg-r-value">255</span>
                  </div>
                </div>
                <div class="glass-control-item">
                  <label>Background G</label>
                  <div class="slider-container">
                    <input type="range" id="bg-g" min="0" max="255" value="255" class="glass-slider">
                    <span class="slider-value" id="bg-g-value">255</span>
                  </div>
                </div>
                <div class="glass-control-item">
                  <label>Background B</label>
                  <div class="slider-container">
                    <input type="range" id="bg-b" min="0" max="255" value="255" class="glass-slider">
                    <span class="slider-value" id="bg-b-value">255</span>
                  </div>
                </div>
              </div>
              
              <div class="glass-control-section">
                <div class="glass-control-item">
                  <label>Border Width</label>
                  <div class="slider-container">
                    <input type="range" id="border-width" min="0" max="5" value="1" class="glass-slider">
                    <span class="slider-value" id="border-width-value">1px</span>
                  </div>
                </div>
                <div class="glass-control-item">
                  <label>Shadow Blur</label>
                  <div class="slider-container">
                    <input type="range" id="shadow-blur" min="0" max="50" value="6" class="glass-slider">
                    <span class="slider-value" id="shadow-blur-value">6px</span>
                  </div>
                </div>
                <div class="glass-control-item">
                  <label>Shadow Spread</label>
                  <div class="slider-container">
                    <input type="range" id="shadow-spread" min="0" max="20" value="0" class="glass-slider">
                    <span class="slider-value" id="shadow-spread-value">0px</span>
                  </div>
                </div>
                <div class="glass-control-item">
                  <label>Saturation</label>
                  <div class="slider-container">
                    <input type="range" id="saturation" min="0" max="200" value="100" class="glass-slider">
                    <span class="slider-value" id="saturation-value">100%</span>
                  </div>
                </div>
                <div class="glass-control-item">
                  <label>Brightness</label>
                  <div class="slider-container">
                    <input type="range" id="brightness" min="0" max="200" value="100" class="glass-slider">
                    <span class="slider-value" id="brightness-value">100%</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Collapsed Chat Module -->
        <div class="state-group">
          <h3>Collapsed Chat Module</h3>
          <div class="chat-module-collapsed">
            <div class="chat-module-header-collapsed">
              <span>Chat</span>
              <button class="chat-expand-button">+</button>
            </div>
          </div>
        </div>

        <!-- Message Bubbles -->
        <div class="state-group">
          <h3>User Message Bubble - Bottom Tail (Short Text)</h3>
          <div class="chat-message chat-message-user">
            <div class="chat-message-bubble tail-bottom">
              <div class="chat-message-text">This is a user message</div>
            </div>
            <div class="chat-message-time">07:16 PM</div>
          </div>
        </div>

        <div class="state-group">
          <h3>User Message Bubble - Top Tail (Short Text)</h3>
          <div class="chat-message chat-message-user">
            <div class="chat-message-bubble tail-top">
              <div class="chat-message-text">This is a user message</div>
            </div>
            <div class="chat-message-time">07:16 PM</div>
          </div>
        </div>

        <div class="state-group">
          <h3>User Message Bubble - Bottom Tail (Long Text - Scaling)</h3>
          <div class="chat-message chat-message-user">
            <div class="chat-message-bubble tail-bottom">
              <div class="chat-message-text">This is a longer user message that demonstrates how the bubble scales with content. The text will wrap naturally and the bubble will grow to accommodate it, but it will never exceed the maximum width of 400px as specified in the design.</div>
            </div>
            <div class="chat-message-time">07:16 PM</div>
          </div>
        </div>

        <div class="state-group">
          <h3>User Message Bubble - Top Tail (Long Text - Scaling)</h3>
          <div class="chat-message chat-message-user">
            <div class="chat-message-bubble tail-top">
              <div class="chat-message-text">This is a longer user message that demonstrates how the bubble scales with content. The text will wrap naturally and the bubble will grow to accommodate it, but it will never exceed the maximum width of 400px as specified in the design.</div>
            </div>
            <div class="chat-message-time">07:16 PM</div>
          </div>
        </div>

        <div class="state-group">
          <h3>User Message Bubble - Bottom Tail with Music Placeholder</h3>
          <div class="chat-message chat-message-user">
            <div class="chat-message-bubble tail-bottom">
              <div class="chat-message-text">Hey, check out this song!</div>
              <div class="music-module-placeholder"></div>
            </div>
            <div class="chat-message-time">07:16 PM</div>
          </div>
        </div>

        <div class="state-group">
          <h3>User Message Bubble - Top Tail with Music Placeholder</h3>
          <div class="chat-message chat-message-user">
            <div class="chat-message-bubble tail-top">
              <div class="chat-message-text">Hey, check out this song!</div>
              <div class="music-module-placeholder"></div>
            </div>
            <div class="chat-message-time">07:16 PM</div>
          </div>
        </div>

        <div class="state-group">
          <h3>AI Message Bubble - Bottom Tail (Short Text)</h3>
          <div class="chat-message chat-message-ai">
            <div class="chat-message-bubble tail-bottom">
              <div class="chat-message-text">This is an AI message from Alex Oskie</div>
            </div>
            <div class="chat-message-time">07:17 PM</div>
          </div>
        </div>

        <div class="state-group">
          <h3>AI Message Bubble - Top Tail (Short Text)</h3>
          <div class="chat-message chat-message-ai">
            <div class="chat-message-bubble tail-top">
              <div class="chat-message-text">This is an AI message from Alex Oskie</div>
            </div>
            <div class="chat-message-time">07:17 PM</div>
          </div>
        </div>

        <div class="state-group">
          <h3>AI Message Bubble - Bottom Tail (Long Text - Scaling)</h3>
          <div class="chat-message chat-message-ai">
            <div class="chat-message-bubble tail-bottom">
              <div class="chat-message-text">This is a longer AI message that demonstrates how the bubble scales with content. The text will wrap naturally and the bubble will grow to accommodate it, but it will never exceed the maximum width of 400px as specified in the design.</div>
            </div>
            <div class="chat-message-time">07:17 PM</div>
          </div>
        </div>

        <div class="state-group">
          <h3>AI Message Bubble - Top Tail (Long Text - Scaling)</h3>
          <div class="chat-message chat-message-ai">
            <div class="chat-message-bubble tail-top">
              <div class="chat-message-text">This is a longer AI message that demonstrates how the bubble scales with content. The text will wrap naturally and the bubble will grow to accommodate it, but it will never exceed the maximum width of 400px as specified in the design.</div>
            </div>
            <div class="chat-message-time">07:17 PM</div>
          </div>
        </div>

        <div class="state-group">
          <h3>AI Message Bubble - Bottom Tail with Music Placeholder</h3>
          <div class="chat-message chat-message-ai">
            <div class="chat-message-bubble tail-bottom">
              <div class="chat-message-text">AI message here.</div>
              <div class="music-module-placeholder"></div>
            </div>
            <div class="chat-message-time">07:17 PM</div>
          </div>
        </div>

        <div class="state-group">
          <h3>AI Message Bubble - Top Tail with Music Placeholder</h3>
          <div class="chat-message chat-message-ai">
            <div class="chat-message-bubble tail-top">
              <div class="chat-message-text">AI message here.</div>
              <div class="music-module-placeholder"></div>
            </div>
            <div class="chat-message-time">07:17 PM</div>
          </div>
        </div>

        <div class="state-group">
          <h3>AI Message Bubble - Bottom Tail with Long Text + Music</h3>
          <div class="chat-message chat-message-ai">
            <div class="chat-message-bubble tail-bottom">
              <div class="chat-message-text">give 'Bob Dylan - Like a Rolling Stone' a spin. It's like a musical time machine back to the 60s.</div>
              <div class="music-module-placeholder"></div>
            </div>
            <div class="chat-message-time">07:17 PM</div>
          </div>
        </div>

        <div class="state-group">
          <h3>AI Message Bubble - Top Tail with Long Text + Music</h3>
          <div class="chat-message chat-message-ai">
            <div class="chat-message-bubble tail-top">
              <div class="chat-message-text">give 'Bob Dylan - Like a Rolling Stone' a spin. It's like a musical time machine back to the 60s.</div>
              <div class="music-module-placeholder"></div>
            </div>
            <div class="chat-message-time">07:17 PM</div>
          </div>
        </div>

        <!-- Nested Module Expanded -->
        <div class="state-group full-width">
          <h3>Nested Module Expanded</h3>
          <div class="chat-message chat-message-ai">
            <div class="chat-message-bubble">
              <div class="chat-message-text">Check out this song:</div>
              <div class="chat-message-nested">
                <div class="nested-module-expanded">
                  <div class="media-module-nested">
                    <div class="media-title-nested">Bob Dylan - Like a Rolling Stone</div>
                    <div class="media-channel-nested">BobDylanVEVO</div>
                    <div class="media-embed-nested">
                      <div class="youtube-thumbnail-placeholder">
                        <div class="play-button">â–¶</div>
                        <div class="youtube-logo">YouTube</div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="nested-module-actions">
                  <button class="nested-module-toggle">âˆ’</button>
                  <button class="nested-module-extract">â†—</button>
                  <div class="nested-module-drag-handle">â‹®â‹®</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Empty State -->
        <div class="state-group">
          <h3>Empty State</h3>
          <div class="chat-module-example">
            <div class="chat-messages">
              <div class="chat-empty-state">
                Start a conversation with your AI friend!
              </div>
            </div>
            <div class="chat-input-container">
              <input type="text" class="chat-input" placeholder="Type a message...">
              <button class="chat-send-button">Send</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Media Player Play Area -->
    <section class="play-area" id="media-player-area">
      <h2 class="play-area-title">Media Player</h2>
      <div class="play-area-content">
        <!-- Desktop Standalone -->
        <div class="state-group full-width">
          <h3>Desktop Standalone</h3>
          <div class="media-module-desktop">
            <input type="text" class="module-input" value="Bob Dylan - Like a Rolling Stone" placeholder="Song title">
            <div class="media-channel">BobDylanVEVO</div>
            <div class="media-embed">
              <div class="youtube-thumbnail-placeholder">
                <div class="play-button">â–¶</div>
                <div class="youtube-logo">YouTube</div>
              </div>
            </div>
            <div class="media-link">
              <a href="#" class="youtube-link">Open in YouTube â†—</a>
            </div>
          </div>
        </div>

        <!-- Nested Preview (Chat) -->
        <div class="state-group">
          <h3>Nested Preview (Chat)</h3>
          <div class="nested-module-preview">
            <div class="nested-module-preview-content">
              <div class="nested-module-preview-icon">ðŸŽµ</div>
              <div class="nested-module-preview-text">
                <div class="nested-module-preview-title">Music Player</div>
                <div class="nested-module-preview-subtitle">Bob Dylan - Like a Rolling Stone</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Nested Expanded (Chat) -->
        <div class="state-group full-width">
          <h3>Nested Expanded (Chat)</h3>
          <div class="media-module-nested">
            <div class="media-title-nested">Bob Dylan - Like a Rolling Stone</div>
            <div class="media-channel-nested">BobDylanVEVO</div>
            <div class="media-embed-nested">
              <div class="youtube-thumbnail-placeholder">
                <div class="play-button">â–¶</div>
                <div class="youtube-logo">YouTube</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Loading State -->
        <div class="state-group">
          <h3>Loading State</h3>
          <div class="media-module-desktop">
            <input type="text" class="module-input" value="Bob Dylan - Like a Rolling Stone" placeholder="Song title">
            <div class="media-loading">Searching YouTube...</div>
          </div>
        </div>

        <!-- With Video -->
        <div class="state-group full-width">
          <h3>With Video</h3>
          <div class="media-module-desktop">
            <input type="text" class="module-input" value="Bob Dylan - Like a Rolling Stone" placeholder="Song title">
            <div class="media-channel">BobDylanVEVO</div>
            <div class="media-embed">
              <div class="youtube-thumbnail-placeholder">
                <div class="play-button">â–¶</div>
                <div class="youtube-logo">YouTube</div>
              </div>
            </div>
            <div class="media-link">
              <a href="#" class="youtube-link">Open in YouTube â†—</a>
            </div>
          </div>
        </div>

        <!-- Audio Only -->
        <div class="state-group">
          <h3>Audio Only</h3>
          <div class="media-module-desktop">
            <input type="text" class="module-input" value="Song Title" placeholder="Song title">
            <input type="text" class="module-input" value="https://example.com/audio.mp3" placeholder="Audio URL">
            <div class="audio-player-placeholder">
              <div class="audio-controls">
                <button class="audio-play">â–¶</button>
                <div class="audio-progress">
                  <div class="audio-progress-bar"></div>
                </div>
                <div class="audio-time">0:00 / 3:45</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Image Module Play Area -->
    <section class="play-area" id="image-module-area">
      <h2 class="play-area-title">Image Module</h2>
      <div class="play-area-content">
        <!-- Image module states will go here -->
        <div class="state-group">
          <h3>States Placeholder</h3>
          <p class="placeholder-text">Image module states to be added</p>
        </div>
      </div>
    </section>

    <!-- Text Module Play Area -->
    <section class="play-area" id="text-module-area">
      <h2 class="play-area-title">Text Module</h2>
      <div class="play-area-content">
        <!-- Text module states will go here -->
        <div class="state-group">
          <h3>States Placeholder</h3>
          <p class="placeholder-text">Text module states to be added</p>
        </div>
      </div>
    </section>

    <!-- Map Module Play Area -->
    <section class="play-area" id="map-module-area">
      <h2 class="play-area-title">Map Module</h2>
      <div class="play-area-content">
        <!-- Map module states will go here -->
        <div class="state-group">
          <h3>States Placeholder</h3>
          <p class="placeholder-text">Map module states to be added</p>
        </div>
      </div>
    </section>

    <!-- Search Module Play Area -->
    <section class="play-area" id="search-module-area">
      <h2 class="play-area-title">Search Module</h2>
      <div class="play-area-content">
        <!-- Search module states will go here -->
        <div class="state-group">
          <h3>States Placeholder</h3>
          <p class="placeholder-text">Search module states to be added</p>
        </div>
      </div>
    </section>
  </div>
  
  <script>
    // Glass effect controls - scoped to chat-container-bg
    const glassContainer = document.getElementById('glass-container');
    if (glassContainer) {
      const sliders = {
        'light-intensity': { element: document.getElementById('light-intensity'), value: document.getElementById('light-intensity-value'), unit: '%' },
        'refraction': { element: document.getElementById('refraction'), value: document.getElementById('refraction-value'), unit: '' },
        'depth': { element: document.getElementById('depth'), value: document.getElementById('depth-value'), unit: '' },
        'dispersion': { element: document.getElementById('dispersion'), value: document.getElementById('dispersion-value'), unit: '' },
        'frost': { element: document.getElementById('frost'), value: document.getElementById('frost-value'), unit: '' },
        'bg-r': { element: document.getElementById('bg-r'), value: document.getElementById('bg-r-value'), unit: '' },
        'bg-g': { element: document.getElementById('bg-g'), value: document.getElementById('bg-g-value'), unit: '' },
        'bg-b': { element: document.getElementById('bg-b'), value: document.getElementById('bg-b-value'), unit: '' },
        'border-width': { element: document.getElementById('border-width'), value: document.getElementById('border-width-value'), unit: 'px' },
        'shadow-blur': { element: document.getElementById('shadow-blur'), value: document.getElementById('shadow-blur-value'), unit: 'px' },
        'shadow-spread': { element: document.getElementById('shadow-spread'), value: document.getElementById('shadow-spread-value'), unit: 'px' },
        'saturation': { element: document.getElementById('saturation'), value: document.getElementById('saturation-value'), unit: '%' },
        'brightness': { element: document.getElementById('brightness'), value: document.getElementById('brightness-value'), unit: '%' }
      };

      function updateGlassEffect() {
        const lightIntensity = parseInt(sliders['light-intensity'].element.value);
        const refraction = parseInt(sliders['refraction'].element.value);
        const depth = parseInt(sliders['depth'].element.value);
        const dispersion = parseInt(sliders['dispersion'].element.value);
        const frost = parseInt(sliders['frost'].element.value);
        const bgR = parseInt(sliders['bg-r'].element.value);
        const bgG = parseInt(sliders['bg-g'].element.value);
        const bgB = parseInt(sliders['bg-b'].element.value);
        const borderWidth = parseInt(sliders['border-width'].element.value);
        const shadowBlur = parseInt(sliders['shadow-blur'].element.value);
        const shadowSpread = parseInt(sliders['shadow-spread'].element.value);
        const saturation = parseInt(sliders['saturation'].element.value);
        const brightness = parseInt(sliders['brightness'].element.value);

        // Calculate blur based on frost value
        const blurAmount = 5 + (frost / 100) * 15; // 5px to 20px
        
        // Calculate background opacity based on depth and intensity
        const baseOpacity = 0.1;
        const opacity = baseOpacity + (depth / 100) * 0.15 + (lightIntensity / 100) * 0.1;
        
        // Calculate border opacity based on refraction
        const borderOpacity = 0.18 + (refraction / 100) * 0.12;
        
        // Apply background color with saturation and brightness filters
        const bgColor = `rgba(${bgR}, ${bgG}, ${bgB}, ${opacity})`;
        
        // Apply styles
        glassContainer.style.backdropFilter = `blur(${blurAmount}px) saturate(${saturation}%) brightness(${brightness}%)`;
        glassContainer.style.webkitBackdropFilter = `blur(${blurAmount}px) saturate(${saturation}%) brightness(${brightness}%)`;
        glassContainer.style.background = bgColor;
        glassContainer.style.border = `${borderWidth}px solid rgba(255, 255, 255, ${borderOpacity})`;
        glassContainer.style.boxShadow = `0 4px ${shadowBlur}px ${shadowSpread}px rgba(0, 0, 0, 0.1)`;
        
        // Update light preview gradient based on intensity
        const lightPreview = document.querySelector('.light-preview');
        if (lightPreview) {
          lightPreview.style.background = `linear-gradient(135deg, rgba(255, 255, 255, ${lightIntensity / 100 * 0.4}) 0%, rgba(255, 255, 255, ${lightIntensity / 100 * 0.1}) 100%)`;
        }
      }

      // Initialize all sliders
      Object.keys(sliders).forEach(key => {
        const slider = sliders[key];
        if (slider.element && slider.value) {
          slider.element.addEventListener('input', () => {
            const val = slider.element.value;
            slider.value.textContent = val + slider.unit;
            updateGlassEffect();
          });
        }
      });

      // Initial update
      updateGlassEffect();
    }

    // Drag and Resize functionality for playground
    (function() {
      const MIN_WIDTH = 280;
      const MAX_WIDTH = 600;

      let resizingElement = null;
      let resizeStartX = 0;
      let resizeStartWidth = 0;


      // Make resize handles work
      document.querySelectorAll('.module-resize-handle').forEach(handle => {
        handle.addEventListener('mousedown', (e) => {
          e.preventDefault();
          e.stopPropagation();
          resizingElement = handle.parentElement;
          const rect = resizingElement.getBoundingClientRect();
          resizeStartX = e.clientX;
          resizeStartWidth = rect.width;
        });
      });

      // Mouse move handler
      document.addEventListener('mousemove', (e) => {
        if (resizingElement) {
          const deltaX = e.clientX - resizeStartX;
          const newWidth = Math.max(MIN_WIDTH, Math.min(MAX_WIDTH, resizeStartWidth + deltaX));
          resizingElement.style.width = `${newWidth}px`;
        }
      });

      // Mouse up handler
      document.addEventListener('mouseup', () => {
        resizingElement = null;
      });
    })();
  </script>
</body>
</html>

